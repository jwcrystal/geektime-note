# Day 27 - 程序員練級攻略：系統知識

建議閱讀：

[深入理解計算機系統](https://book.douban.com/subject/5333562/)
- 本書從程序員的視角詳細闡述計算機系統的本質概念，並展示這些概念如何實實在在地影響應用程序的正確性、性能和實用性
- 程序員必讀的一本書

[Unix 高級環境編程](https://book.douban.com/subject/1788421/)
[Unix 網路編程 第一卷 套接口 API](https://book.douban.com/subject/1500149/)
[Unix 網路編程 第二卷 進程通訊](https://book.douban.com/subject/4118577/)
[TCP/IP 詳解 卷 1 協議](https://book.douban.com/subject/4118577/)

經典書籍比較難啃動的話，可以參考以下：
- Linux C 編程一站式學習
- TCP/IP 網路編程
- 圖解 TCP/IP
- The TCP/IP Guide

學習網路協議，最好使用抓包工具查看網路流動，可以閱讀[Wireshark 數據包分析實戰](https://book.douban.com/subject/21691692/)

一些學習要點參考：
- 用這些系統知識操作一下文件系統，實現一個可以拷貝目錄樹的小程序
- 用 fork / wait / waitpid 寫一個多進程的程序，用 pthread 寫一個多線程帶同步或互斥的程序。比如，多進程購票的程序
- 用 signal / kill / raise / alarm / pause / sigprocmask 實現一個多進程間的信號量通信的程序
- 學會使用 gcc 和 gdb 來編程和調試程序
- 學會使用 makefile 來編譯程序
- Socket 的進程間通信

## C10K 問題
> Ref: 
> - [C10K Problem](https://www.oschina.net/translate/c10k)
> - [中文翻譯版](https://www.oschina.net/translate/c10k)

**C10K 問題本質上是操作系統處理大併發請求的問題。**
- 對於客戶端過來的大量的併發請求，需要創建相應的服務進程或線程。這些進程或線程多了，導致數據拷貝頻繁（緩存 I/O、內核將數據拷貝到用戶進程空間、阻塞）， 進程 / 線程上下文切換消耗大，從而導致資源被耗盡而崩潰。這就是 C10K 問題的本質

瞭解這個問題，並瞭解操作系統是如何通過多路復用的技術來解決這個問題的，有助於瞭解各種 I/O 和異步模型，這對於你未來的編程和架構能力是相當重要的。

補充 C10M 問題，參考 [The Secret To 10 Million Concurrent Connections -The Kernel Is The Problem, Not The Solution](https://time.geekbang.org/column/article/8888)

## 實戰項目

### 實現一個 telnet 版本的聊天服務器
主要有以下需求：
- 每個客戶端可以用使用telnet ip:port的方式連接到服務器上
- 新連接需要用用戶名和密碼登錄，如果沒有，則需要註冊一個
- 可以選擇一個聊天室加入聊天
- 管理員有權創建或刪除聊天室，普通人員只有加入、退出、查詢聊天室的權力
- 聊天室需要有人數限制，每個人發出來的話，其它所有的人都要能看得到

### 實現一個簡單的 HTTP 服務器
主要有以下需求：
- 解釋瀏覽器傳來的 HTTP 協議，只需要處理 URL path
- 把所代理的目錄列出來
- 在瀏覽器上可以瀏覽目錄里的文件和下級目錄
- 如果點擊文件，則把文件打開傳給瀏覽器（瀏覽器能夠自動顯示圖片、PDF，或 HTML、CSS、JavaScript 以及文本文件）
- 如果點擊子目錄，則進入到子目錄中，並把子目錄中的文件列出來

### 實現一個生產者 / 消費者消息隊列服務
主要有以下需求：
- 消息隊列採用一個 Ring-buffer 的數據結構
- 可以有多個 topic 供生產者寫入消息及消費者取出消息
- 需要支持多個生產者併發寫
- 需要支持多個消費者消費消息（只要有一個消費者成功處理消息就可以刪除消息）
- 消息隊列要做到不丟數據（要把消息持久化下來）
- 能做到性能很高。

## 小結

專業編程方面最為重要的三部分內容：**編程語言**、**理論學科**和**系統知識**。

- 編程語言
- 算法和數據結構
    - 任何一個稱職的程序員都需要學習和掌握的。必需要掌握
- 計算機相關系統
    - 至少要掌握三個系統的基礎知識，一個是**操作系統**，一個是**網路系統**，還有一個是**數據庫系統**。它們分別代表著計算機基礎構架的三大組件：**計算**、**存儲**、**網路**

深入方向參考：

- **底層方向**：操作系統、文件系統、數據庫、網絡
- **架構方向**：分布式系統架構、微服務、DevOps、Cloud Native
- **數據方向**：大數據、機器學習、人工智能
- **前端方向**：如果對用戶體驗或是交互更感興趣
- **其它方向**：如安全開發、運維開發、嵌入式開發

一旦選好，就要勇往直前地走下去，當然，要回頭轉別的方向也沒什麼問題，只是不同的方向上會有不同的經驗積累，經驗積累是看書看不來的，這個是轉方向的成本。

此文章為3月Day27學習筆記，內容來源於極客時間[《左耳聽風》](https://time.geekbang.org/column/article/8888)